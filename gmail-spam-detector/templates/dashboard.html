<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gmail Spam Detection Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="logo">üõ°Ô∏è Gmail Spam Detection</h1>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="refreshData()">
                        <span class="icon">üîÑ</span> Refresh
                    </button>
                    <button class="btn btn-secondary" onclick="exportReport()">
                        <span class="icon">üì•</span> Export Report
                    </button>
                    <button class="btn btn-danger" onclick="confirmReset()"
                        style="background-color: #ef4444; color: white; margin-left: 10px;">
                        <span class="icon">üóëÔ∏è</span> Reset Data
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="main-content">
        <div class="container">

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                        üìß
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-title">Total Emails</h3>
                        <p class="stat-value" id="total-emails">0</p>
                        <p class="stat-subtitle">Processed</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                        ‚úÖ
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-title">Safe Emails</h3>
                        <p class="stat-value" id="safe-emails">0</p>
                        <p class="stat-subtitle">No threats detected</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                        ‚ö†Ô∏è
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-title">Suspicious</h3>
                        <p class="stat-value" id="suspicious-emails">0</p>
                        <p class="stat-subtitle">Needs review</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                        üö´
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-title">Spam Detected</h3>
                        <p class="stat-value" id="spam-emails">0</p>
                        <p class="stat-subtitle">Moved to spam</p>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="charts-grid">
                <div class="chart-card">
                    <h2 class="card-title">Classification Distribution</h2>
                    <div class="chart-container">
                        <canvas id="classificationChart"></canvas>
                    </div>
                </div>

                <div class="chart-card">
                    <h2 class="card-title">Weekly Trend</h2>
                    <div class="chart-container">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Tabs Section -->
            <div class="tabs-container">
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('all')">
                        All Emails
                    </button>
                    <button class="tab-btn" onclick="switchTab('spam')">
                        Spam Emails
                    </button>
                    <button class="tab-btn" onclick="switchTab('suspicious')">
                        Suspicious
                    </button>
                    <button class="tab-btn" onclick="switchTab('safe')">
                        Safe Emails
                    </button>
                </div>

                <div class="tab-content">
                    <div class="email-list" id="email-list">
                        <!-- Email items will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Threat Domains -->
            <div class="threat-domains-card">
                <h2 class="card-title">Top Threat Domains</h2>
                <div id="threat-domains-list">
                    <!-- Threat domains will be loaded here -->
                </div>
            </div>

        </div>
    </main>

    <!-- Email Detail Modal -->
    <div class="modal" id="emailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Email Details</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Email details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Loading data...</p>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>

</html>